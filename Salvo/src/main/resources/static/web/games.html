<!DOCTYPE HTML>
<html xmlns:v-bind="http://www.w3.org/1999/xhtml" xmlns:v-model="http://www.w3.org/1999/xhtml"
      xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <link rel="stylesheet" href="/web/games.css">
</head>
<body>
<div id="app">
<div>
    <div>
        <form v-show="authentication == null">
            <label>Username: <input type="text" v-model:value="username"></label>
            <label>Password: <input type="password" v-model:value="password"></label>
            <button type="button" v-on:click="login">SignIn</button>
            <button v-show="authentication == null" type="button" v-on:click="register">Register</button>
        </form>
        <div v-if="authentication != null">
             <h2>{{authentication.email}}</h2>
        </div>
        <button v-show="authentication != null" type="button">Create a Game</button>
        <button v-show="authentication != null" type="button" v-on:click="logout">SignOut</button>
    </div>
    <h1>Salvo!</h1>
    <ul>
        <li v-for='game in games'>
            Date: {{game.date|dateFormatted}}
            <a v-if="authentication != null && game.players[0].player.id == authentication.id" v-bind:href="'http://localhost:8080/web/game.html?gp= '+ game.players[0].gpid">Link to the game</a>
            <a v-else-if="authentication != null && (game.players[1] != null && game.players[1].player.id) == authentication.id" v-bind:href="'http://localhost:8080/web/game.html?gp= '+ game.players[1].gpid">Link to the game</a>
            <ol>
                <li v-for='player in game.players'>
                    Email: {{player.player.email}}
                </li>
            </ol>
        </li>
    </ul>
</div>

<div class="table">
    <table border="1">
        <thead>
            <tr>
                <th>Name</th>
                <th>Total</th>
                <th>Won</th>
                <th>Lost</th>
                <th>Tied</th>
            </tr>
        </thead>
        <tbody>
        <tr v-for="(player, index) in players.email">
            <td>{{player}}</td>
            <td>{{players.total[index]}}</td>
            <td>{{players.won[index]}}</td>
            <td>{{players.lost[index]}}</td>
            <td>{{players.tied[index]}}</td>
        </tr>
        </tbody>
    </table>
<div>
</div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="games.js"></script>
</body>
</html>